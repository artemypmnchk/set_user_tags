# Массовое назначение тегов сотрудникам в Пачке

Этот инструмент поможет быстро и удобно: выгрузить теги, пользователей, массово назначить или обновить теги пользователям в Пачке. Подходит для HR, руководителей, администраторов — не требует знаний программирования.

---

## Требования
- Ruby (если не установлен — инструкция ниже)
- Bundler (устанавливается автоматически)

---
## Как установить Ruby 
Если на компьютере еще не установлен язык программирования Ruby:
   - Для Mac чаще всего Ruby уже есть (но иногда его нужно обновить)
   - Для Windows Ruby нужно установить отдельно
   - Инструкция по установке Ruby на официальном сайте: https://www.ruby-lang.org/ru/documentation/installation/
   - Для Windows: https://rubyinstaller.org/

## Как получить токен администратора?
1. Войдите в Пачку как администратор.
2. Перейдите в раздел автоматизации → API.
3. Скопируйте access_token и вставьте в файл `.env`.

## Как создать файл .env?
1. Скопируйте файл `.env.example` и назовите `.env`(точка в начале!).
2. Откройте файл `.env` в любом текстовом редакторе:
   - **VS Code** (удобнее всего)
   - **Блокнот (Notepad)** на Windows (при сохранении выбрать тип "Все файлы" и имя `.env`)
   - **TextEdit** на Mac (в меню "Формат" выбрать "Обычный текст" и сохранить как `.env`)
3. Вставьте свой токен вместо `ваш_токен_от_Пачки`.

---

## Инструкция по запуску и использованию

### 1. Подготовьте доступ
- Скопируйте токен доступа администратора в Пачке (access_token).
- Скопируйте файл `.env.example` и переименуйте его в `.env`, как указано в инструкции выше.
- Откройте `.env` в Блокноте/Notepad/любом редакторе и вставьте токен и адрес API (подробнее ниже).

### 2. Запустите программу
- Откройте папку с программой, через любой текстовый редактор (удобнее всего VS Code) на компьютере.
- Откройте терминал в этой папке.
- Введите:
  ```
  bundle install
  ```
- Затем запустите программу:
  ```
  bundle exec ruby set_user_tags.rb
  ```
- Появится простое меню. Всё управление — через цифры и Enter.

### 3. Назначьте теги сотрудникам
- Сначала выберите пункт «Создать шаблон users_tags.csv на основе актуальных пользователей» (обычно это пункт 4). Появится файл `users_tags.csv` со списком сотрудников из Пачки.
- Откройте `users_tags.csv` в Excel или Google Таблицах.
- В столбце `tags` для каждого сотрудника укажите теги через точку с запятой (например: `backend;новичок;Вся компания`).
- Сохраните файл.
- Вернитесь в терминал и выберите пункт 1 — массовое назначение тегов. Программа всё сделает сама.

### 4. Как понять, что всё получилось?
- Для каждого сотрудника появится строка вида:
  ```
  [OK] user@example.com: назначены теги: backend, новичок
  ```
- Если тег новый — появится строка:
  ```
  Тег 'новичок' создан.
  ```
- Если возникла ошибка — программа напишет, что не удалось назначить теги, и причину.
- По другим действиям программа будет выводить в терминале информацию, что действие совершено.

---
## После завершения работы программы
- В целях обеспечения безопасности доступа, рекомендуем удалить .env файл или токен внутри него.

---

## В случае проблем с загрузкой
Если что-то не работает — проверьте, правильно ли заполнены `.env` и `users_tags.csv`, есть ли интернет и актуален ли токен. Ошибки будут выведены в терминал понятным языком.
